#!/bin/bash
###############################################################################
SCRIPT_PATH=$(cd $(dirname ${BASH_SOURCE[0]}) && pwd) ;
###############################################################################

source ${SCRIPT_PATH}/conf/build.sh

###############################################################################
###############################################################################

function setup_env () {
    if [ ${VIRTUAL_ENV} ] ; then
        exit 0
    else
        ${1} --prompt="[$2] " .
    fi
}

function setup_pip_update () {
    if [ ${VIRTUAL_ENV} ] ; then
        for LIB in $(pip list | cut -d' ' -f1) ; do
            pip install -U $LIB 
        done
    fi
}

###############################################################################
###############################################################################

case ${1} in

    init)
        setup_env ${DEF_VIRTENV} ${DEF_APPNAME} ;;
    pip-update)
        setup_pip_update ;;
    *)
        $0 init $1 $2 ;;
esac

###############################################################################
###############################################################################

exit 0
